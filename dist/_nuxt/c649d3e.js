(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{399:function(e,t,r){"use strict";r.r(t);var o=r(14),n=(r(69),r(16),r(42),r(43),r(221),{mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var code,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(code=e.$route.query.code){t.next=6;break}return console.error("Code d'autorisation manquant."),e.$toast.error("Erreur d'authentification. Veuillez réessayer."),e.$router.push("/login"),t.abrupt("return");case 6:return t.prev=6,t.next=9,e.$axios.$post("https://accounts.spotify.com/api/token",new URLSearchParams({grant_type:"authorization_code",code:code,redirect_uri:"https://e88c-197-230-122-194.ngrok-free.app/callback",client_id:"cd0a66c293314bce91e0810930117a0f",client_secret:"e5f05c8775f44f9f8fce13dcd499ea74"}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 9:r=t.sent,console.log("Réponse Spotify :",r),localStorage.setItem("spotify_access_token",r.access_token),localStorage.setItem("spotify_refresh_token",r.refresh_token),localStorage.setItem("spotify_token_expires_at",Date.now()+1e3*r.expires_in),e.$router.push("/dashboard"),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(6),console.error("Erreur lors de l'échange du token :",(null===(o=t.t0.response)||void 0===o?void 0:o.data)||t.t0.message),e.$toast.error("Erreur lors de l'authentification. Veuillez réessayer."),e.$router.push("/login");case 22:case"end":return t.stop()}}),t,null,[[6,17]])})))()}}),c=r(49),component=Object(c.a)(n,(function(){this._self._c;return this._m(0)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"min-h-screen flex items-center justify-center bg-black"},[t("div",{staticClass:"text-center"},[t("h1",{staticClass:"text-4xl font-bold text-white mb-4"},[e._v("Connexion en cours...")]),e._v(" "),t("div",{staticClass:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500 mx-auto"})])])}],!1,null,null,null);t.default=component.exports}}]);