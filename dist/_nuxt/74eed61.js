(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{316:function(t,e,r){t.exports=r.p+"img/default-album.c4b3b71.png"},361:function(t,e,r){var content=r(397);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(92).default)("24208c60",content,!0,{sourceMap:!1})},396:function(t,e,r){"use strict";r(361)},397:function(t,e,r){var n=r(91)((function(i){return i[1]}));n.push([t.i,"",""]),n.locals={},t.exports=n},406:function(t,e,r){"use strict";r.r(e);r(35);var n=r(14),o=(r(69),r(36),r(54),r(41),r(53),r(57),r(16),{data:function(){return{playlistName:"",playlistDescription:"",playlistTracks:[],loading:!0}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,r=localStorage.getItem("spotify_access_token"),n=t.$route.params.id,e.prev=3,e.next=6,t.$axios.$get("https://api.spotify.com/v1/playlists/".concat(n),{headers:{Authorization:"Bearer ".concat(r)}});case 6:o=e.sent,t.playlistName=o.name,t.playlistDescription=o.description,t.playlistTracks=o.tracks.items.map((function(t){return t.track})).filter(Boolean),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(3),console.error("Error loading playlist:",e.t0),t.playlistName="Erreur",t.playlistDescription="",t.playlistTracks=[];case 18:return e.prev=18,t.loading=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,12,18,21]])})))()},methods:{playTrack:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,n=localStorage.getItem("spotify_access_token"),o=null,e.$store&&e.$store.getters&&e.$store.getters.getDeviceId&&(o=e.$store.getters.getDeviceId),o||(o=localStorage.getItem("spotify_device_id")),console.log("Trying to play:",t,"with deviceId:",o,"and token:",n?n.slice(0,10)+"...":null),n&&o){r.next=9;break}return alert("Le lecteur Spotify n'est pas prêt. Veuillez ouvrir le lecteur sur le dashboard et réessayer."),r.abrupt("return");case 9:return r.next=11,e.$axios.$put("https://api.spotify.com/v1/me/player/play?device_id=".concat(o),{uris:[t]},{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});case 11:console.log("Playback request sent!"),r.next=18;break;case 14:r.prev=14,r.t0=r.catch(0),console.error("Error playing track:",r.t0),alert("Erreur lors de la lecture du morceau : "+((null===(l=r.t0.response)||void 0===l||null===(l=l.data)||void 0===l||null===(l=l.error)||void 0===l?void 0:l.message)||r.t0.message));case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()}}}),l=(r(396),r(49)),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex h-screen bg-gradient-to-br from-black via-[#2d0036] to-[#1a0022] text-white"},[e("aside",{staticClass:"w-64 bg-gradient-to-b from-black via-[#2d0036] to-[#1a0022] p-4"},[e("nuxt-link",{staticClass:"text-pink-200 hover:text-pink-400 flex items-center mb-4 font-bold",attrs:{to:"/dashboard"}},[e("span",{staticClass:"material-icons mr-2 text-pink-400"},[t._v("arrow_back")]),t._v("\n      Retour\n    ")])],1),t._v(" "),e("main",{staticClass:"flex-1 overflow-y-auto"},[e("header",{staticClass:"p-4 bg-black/80 border-b border-pink-900"},[e("h1",{staticClass:"text-2xl font-bold text-pink-200"},[t._v(t._s(t.playlistName))]),t._v(" "),e("p",{staticClass:"text-pink-300"},[t._v(t._s(t.playlistDescription))])]),t._v(" "),e("section",{staticClass:"p-4"},[t.loading?e("div",{staticClass:"text-center mt-8"},[e("svg",{staticClass:"animate-spin h-8 w-8 text-pink-300 mx-auto",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[e("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}}),t._v(" "),e("path",{staticClass:"opacity-75",attrs:{fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"}})]),t._v(" "),e("p",{staticClass:"mt-4 text-pink-300"},[t._v("Chargement des morceaux...")])]):e("div",[t.playlistTracks&&t.playlistTracks.length?e("div",t._l(t.playlistTracks,(function(track){var n;return e("div",{key:track.id,staticClass:"flex items-center bg-black/70 rounded-2xl p-4 mb-2 shadow-lg shadow-pink-900/10"},[e("img",{staticClass:"w-16 h-16 object-cover rounded mr-4 border-2 border-pink-400",attrs:{src:(null===(n=track.album)||void 0===n||null===(n=n.images)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.url)||r(316),alt:track.name}}),t._v(" "),e("div",{staticClass:"flex-1"},[e("h3",{staticClass:"text-lg font-semibold text-pink-100"},[t._v(t._s(track.name))]),t._v(" "),e("p",{staticClass:"text-pink-300 text-sm"},t._l(track.artists,(function(r,n){return e("span",{key:r.id},[e("nuxt-link",{staticClass:"hover:underline text-pink-200",attrs:{to:"/artist/".concat(r.id)}},[t._v("\n                    "+t._s(r.name)+"\n                  ")]),t._v(" "),n<track.artists.length-1?e("span",[t._v(", ")]):t._e()],1)})),0)]),t._v(" "),e("button",{staticClass:"bg-gradient-to-r from-pink-500 to-purple-500 p-3 rounded-full shadow-lg shadow-pink-500/40 hover:from-pink-400 hover:to-purple-400 text-white ml-4",on:{click:function(e){return t.playTrack(track.uri)}}},[e("i",{staticClass:"material-icons"},[t._v("play_arrow")])])])})),0):e("div",{staticClass:"text-center text-pink-300 py-8"},[t._v("\n          Aucune piste dans cette playlist.\n        ")])])])])])}),[],!1,null,"ef36467e",null);e.default=component.exports}}]);